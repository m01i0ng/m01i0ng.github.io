{"posts":[{"title":"Flutter 中获取屏幕内容区可用高度","content":"首先不管是 Android 还是 iOS 设备，都要考虑各种刘海、水滴屏等等，所以最外层容器要用 SafeArea 包裹，其次要考虑状态栏高度： 如果应用有顶栏，也要考虑顶栏高度： 所以最终实际内容可用区域高度为 屏幕高度 - 状态栏高度 - 顶栏高度，即为内容区高度，当然是在有 SafeArea 的前提下，代码如下： final mediaQuery = MediaQuery.of(context); final availableHeight = mediaQuery.size.height - appBar.preferredSize.height - mediaQuery.padding.top; ","link":"https://m01i0ng.js.org/flutter-zhong-huo-qu-ping-mu-ke-yong-gao-du/"},{"title":"Umi.js 问题总结","content":"使用版本 3.1.1 dva loading 组件错误处理 // src/app.js import { notification } from 'antd' ... export const dva = { config: { onError(err) { err.preventDefault() notification.error({ message: err.message, }) }, }, } ... 修改全局滚动条样式 // src/global.css ... /* 滚动槽 */ ::-webkit-scrollbar { width: 6px; height: 6px; } ::-webkit-scrollbar-track { border-radius: 3px; background: rgb(18, 52, 83); -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.08); } /* 滚动条滑块 */ ::-webkit-scrollbar-thumb { border-radius: 3px; background: rgb(18, 108, 170); -webkit-box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2); } ... antd 开启中文 antd 默认文案是英文的，中文要手动开启 // .umirc.ts ... locale: { default: 'zh-CN', antd: true, title: false, baseNavigator: true, baseSeparator: '-', }, ... // src/layouts/index.js import { ConfigProvider } from 'antd' import zhCN from 'antd/es/locale/zh_CN' ... &lt;ConfigProvider locale={zhCN}&gt;{props.children}&lt;/ConfigProvider&gt; ... ","link":"https://m01i0ng.js.org/umijs-wen-ti-zong-jie/"},{"title":"Spring Boot 中使用 RedisTemplate 进行 scan 操作","content":"Redis 中使用 keys * 会获取所有匹配的键，但同时也会锁住整个 redis 造成雪崩，更好的方法是使用 scan 命令，有关介绍 看这 不做过多介绍 引入依赖 &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;/dependency&gt; 使用 // 注入 RedisTemplate private final StringRedisTemplate redisTemplate; // 定义 scan 方法 private Set&lt;String&gt; scan(String pattern) { Set&lt;String&gt; keys = Sets.newHashSet(); RedisConnection connection =redisTemplate.getConnectionFactory().getConnection(); ScanOptions scanOptions = ScanOptions.scanOptions() .match(pattern) .count(100) .build(); Cursor&lt;byte[]&gt; cursor = connection.scan(scanOptions); while (cursor.hasNext()) { keys.add(new String(cursor.next())); } return keys; } ","link":"https://m01i0ng.js.org/spring-boot-zhong-shi-yong-redistemplate-jin-xing-scan-cao-zuo/"},{"title":"Mac 软件","content":"系统 Dozer brew cask install dozer 折叠状态栏菜单，与之相对的一款收费软件为 Bartender Spectacle brew cask install spectacle 快捷改变窗口尺寸，功能类似 Magnet Scroll Reverser brew cask install scroll-reverser 翻转滚轮方向 Karabiner Elements brew cask install karabiner-elements 键盘重新映射 Tencent Lemon brew cask install tencent-lemon 系统清理、网速硬盘等状态栏显示，相当于免费版 CleanMyMac iina brew cask install iina 播放器 Hand Brake brew cask install handbrake 视频转码 Night Owl brew cask install nightowl 定时自动切换黑暗模式 Tunnel Blick brew cask install tunnelblick-beta VPN 连接 写作 Typora brew cask install typora Markdown 编辑器，干净，全平台支持，免费软件中最佳 mweb brew cask install mweb Markdown 编辑器，分类功能比较强，原生开发性能较高 Pdf Expert brew cask install pdf-expert pdf 阅读器 开发 iTerm2 brew cask install iterm2 终端模拟器 Visual Studio Code brew cask install visual-sdudio-code 代码编辑器 Sequel Pro brew cask install sequel-pro-nightly MySQL 可视化工具 Vmware Fusion brew cask install vmware-fusion Vmware 虚拟机 ","link":"https://m01i0ng.js.org/mac-ruan-jian/"},{"title":"Mac 开发环境搭建","content":"系统配置优化 触摸板控制优化，开启轻按点击功能 defaults write com.apple.AppleMultitouchTrackpad Clicking -int 1 defaults -currentHost write NSGlobalDomain com.apple.mouse.tapBehavior -int 1 defaults write NSGlobalDomain com.apple.mouse.tapBehavior -int 1 # 开启三指拖拽 defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadThreeFingerDrag -bool true defaults write com.apple.AppleMultitouchTrackpad TrackpadThreeFingerDrag -bool true 将 F1-F12 用做标准功能键 defaults write -globalDomain com.apple.keyboard.fnState -int 1 关闭 SIP 重启，按住 cmd+r，进入恢复模式，实用工具-终端，执行 csrutil disable 关闭第三方程序验证 我们或多或少会下载某些破解版的应用，此时直接打开很可能被系统拒绝，或者报错：无法打开已损坏的安装包。我们可以通过命令行关闭这一保（限）护（制）： sudo spctl --master-disable defaults write com.apple.LaunchServices LSQuarantine -bool false 关闭镜像验证 在打开 .dmg 格式的安装文件时，默认会先验证镜像，如果文件本身很大，验证的时间会很长，可以输入以下命令关闭验证： defaults write com.apple.frameworks.diskimages skip-verify -bool true defaults write com.apple.frameworks.diskimages skip-verify-locked -bool true defaults write com.apple.frameworks.diskimages skip-verify-remote -bool true 完全键盘控制 很多操作都会弹出系统的对话框，要求我们确认或者取消，如果没有开启完全键盘控制，我们只能按回车键确认，或者移动鼠标选择取消。如果开启了完全键盘控制，只要按下空格键，就相当于选中蓝色边框的按钮。按下 Tab 键可以在多个按钮之间切换。 defaults write NSGlobalDomain AppleKeyboardUIMode -int 3 Finder 快速预览增强 需要先安装 brew brew cask install qlcolorcode qlgradle qlmarkdown qlstephen qlvideo quicklook-json quicklookapk webpquicklook Brew *nix 都有自带的包管理，用于管理软件包之间的依赖，如 RHEL 的 yum、Debian 的 apt，Mac 本身没有自带的包管理，单有这个第三方的实现 —— HomeBrew，一行命令安装： /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; 安装过程中需要输入密码并下载 Command Line Tools，视网络情况快慢不一 更换镜像源 Brew 自带的镜像源位于国外，不挂代理可能会很慢，这里推荐更换国内的阿里云镜像源： # 替换核心库: cd &quot;$(brew --repo)&quot; git remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git cd &quot;$(brew --repo)/Library/Taps/homebrew/homebrew-core&quot; git remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git brew update # 替换homebrew-bottles: echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles' &gt;&gt; ~/.bash_profile source ~/.bash_profile 安装命令行工具 基本的命令行工具可以直接用 brew install 安装，更多子命令直接执行 brew 即可查看： brew install vim wget curl git 安装一般图形化软件 如微信、QQ 或是 Intellij Idea 等开发工具，也可以用 Brew 安装： brew cask install wechat qq intellij-idea 查找 执行 brew search xxx 即可从软件源中查找，之后从结果列表中取名字安装即可，其中 Formulae 子项下的 brew install xxx，Casks 子项下的 brew cask install xxx Oh My Zsh 此处引官方描述： Oh My Zsh is a delightful, open source, community-driven framework for managing your Zsh configuration. It comes bundled with thousands of helpful functions, helpers, plugins, themes, and a few things that make you shout... 简单说是对默认终端的一个功能增强，还是极大的增强，可以添加各种自定义主题插件等，一行命令安装： brew install zsh sh -c &quot;$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot; 注意使用 zsh 之后需要将以前 ~/.bash_profile ~/.bashrc 设置的环境变量等转移到 ~/.zshrc 中，例如上述的 echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles' &gt;&gt; ~/.zshrc 更多介绍和使用方法点击查看 这里推荐几个很好用的插件：Zsh Users 命令语法高亮 git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting plugins=( [plugins...] zsh-syntax-highlighting) 命令自动补全 git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions plugins=( [plugins...] zsh-autosuggestions) 其他开发环境 Node 版本管理 nvm wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | zsh 镜像 npm i -g mirror-config-china 配置所有中文镜像 Python 版本管理 pyenv brew install pyenv pypi 镜像 pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple Java、Kotlin、Scala、Maven、Gradle 版本管理 sdkman curl -s &quot;https://get.sdkman.io&quot; | zsh 镜像 Maven 使用阿里云镜像： 全局 vim ~/.m2/settings.xml &lt;settings&gt; &lt;mirrors&gt; &lt;mirror&gt; &lt;id&gt;aliyunmaven&lt;/id&gt; &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; &lt;name&gt;阿里云公共仓库&lt;/name&gt; &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt; &lt;/mirror&gt; &lt;/mirrors&gt; &lt;/settings&gt; 项目级 pom.xml &lt;repositories&gt; &lt;repository&gt; &lt;id&gt;aliyunmaven&lt;/id&gt; &lt;name&gt;阿里云公共仓库&lt;/name&gt; &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt; &lt;/repository&gt; &lt;/repositories&gt; Gradle 使用阿里云镜像： 全局 vim ~/.gradle/init.gradle allprojects { repositories { def ALIYUN_REPOSITORY_URL = 'http://maven.aliyun.com/nexus/content/groups/public' def ALIYUN_JCENTER_URL = 'http://maven.aliyun.com/nexus/content/repositories/jcenter' all { ArtifactRepository repo -&gt; if(repo instanceof MavenArtifactRepository){ def url = repo.url.toString() if (url.startsWith('https://repo1.maven.org/maven2')) { project.logger.lifecycle &quot;Repository ${repo.url} replaced by $ALIYUN_REPOSITORY_URL.&quot; remove repo } if (url.startsWith('https://jcenter.bintray.com/')) { project.logger.lifecycle &quot;Repository ${repo.url} replaced by $ALIYUN_JCENTER_URL.&quot; remove repo } } } maven { url ALIYUN_REPOSITORY_URL url ALIYUN_JCENTER_URL } } } 项目级 build.gradle buildscript { repositories { maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' } maven { url 'http://maven.aliyun.com/nexus/content/repositories/jcenter'} } dependencies { classpath 'com.android.tools.build:gradle:2.2.3' // NOTE: Do not place your application dependencies here; they belong // in the individual module build.gradle files } } allprojects { repositories { maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' } maven { url 'http://maven.aliyun.com/nexus/content/repositories/jcenter'} } } Ruby 版本管理 rbenv brew install rbenv 镜像 # 添加 TUNA 源并移除默认源 gem sources --add https://mirrors.tuna.tsinghua.edu.cn/rubygems/ --remove https://rubygems.org/ # 列出已有源 gem sources -l # 应该只有 TUNA 一个 ","link":"https://m01i0ng.js.org/mac-kai-fa-huan-jing-da-jian/"},{"title":"Linux 归纳","content":"系统优化 CT 7 磁盘扩容 场景：VM 虚拟机磁盘分配不足后期添加并扩容至主分区 查看系统挂载信息 df -h 在 VM 设置中扩展磁盘 对新增加的硬盘进行分区、格式化 # 我们增加了空间的硬盘是 /dev/sda # 分区： [root@localhost]# fdisk /dev/sda p 查看已分区数量（我看到有两个 /dev/sda1 /dev/sda2） n 新增加一个分区 p 分区类型我们选择为主分区 分区号输入3（因为1,2已经用过了,sda1是分区1,sda2是分区2,sda3分区3） 回车 默认（起始扇区） 回车 默认（结束扇区） t 修改分区类型 选分区3 8e 修改为LVM（8e就是LVM） w 写分区表 q 完成，退出fdisk命令 # 使用partprobe 命令 或者重启机器 # 格式化分区3命令: mkfs.ext3 /dev/sda3 添加新 LVM 至已有 LVM 组，实现扩容 lvm 进入lvm管理 lvm&gt;pvcreate /dev/sda3 这是初始化刚才的分区3 lvm&gt;vgextend centos /dev/sda3 将初始化过的分区加入到虚拟卷组centos (卷和卷组的命令可以通过 vgdisplay ) lvm&gt;vgdisplay -v 或 者vgdisplay 查看 free PE /Site lvm&gt;lvextend -l+6143 /dev/mapper/centos-root 扩展已有卷的容量（6143 是通过vgdisplay查看free PE /Site的大小） lvm&gt;pvdisplay 查看卷容量，这时你会看到一个很大的卷了 lvm&gt;quit 退出 接着输入以下命令： xfs_growfs /dev/mapper/centos-root 重复执行 df -h 验证 添加 Swap 空间 制作 Swapfile 文件 Linux：fallocate -l 4G /swapfile &amp;&amp; chmod 600 /swapfile CentOS：dd if=/dev/zero of=/swapfile count=4096 bs=1MiB &amp;&amp; chmod 600 /swapfile 格式化交换空间 mkswap /swapfile 开启交换空间 swapon /swapfile 开机自动挂载 vim /etc/fstab 把原有交换空间文件替换为新的 设置时区 查看可用时区 timedatectl list-timezones 设置时区 timedatectl set-timezone Asia/Shanghai 更新 timedatectl 设置 NTP 安装 NTP yum install -y ntp 开启 systemctl start ntpd &amp;&amp; systemctl enable ntpd ","link":"https://m01i0ng.js.org/linux-gui-na/"},{"title":"使用 Kubeadm 快速创建 K8S 集群","content":"环境架构 服务器 192.168.1.220 k8s-master 192.168.1.221 k8s-node-1 192.168.1.223 k8s-node-2 系统：centos 7.4 集群部署方式：kubeadm 系统配置 配置主机映射 所有节点 cat &gt; /etc/hosts &lt;&lt; EOF 127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 ::1 localhost localhost.localdomain localhost6 localhost6.localdomain6 192.168.1.220 k8s-master 192.168.1.221 k8s-node-1 192.168.1.223 k8s-node-2 EOF 禁用 selinux 所有节点 sed -i &quot;s/^SELINUX=enforcing/SELINUX=disabled/g&quot; /etc/sysconfig/selinux sed -i &quot;s/^SELINUX=enforcing/SELINUX=disabled/g&quot; /etc/selinux/config sed -i &quot;s/^SELINUX=permissive/SELINUX=disabled/g&quot; /etc/sysconfig/selinux sed -i &quot;s/^SELINUX=permissive/SELINUX=disabled/g&quot; /etc/selinux/config setenforce 0 禁用防火墙 所有节点 systemctl disable firewalld &amp;&amp; systemctl stop firewalld 关闭交换分区 所有节点 sed -i 's/.*swap.*/#&amp;/' /etc/fstab swapoff -a 配置转发参数 所有节点 cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 vm.swappiness=0 EOF sysctl --system 加载 ipvs 相关内核模块 所有节点 # 如果重新开机，需要重新加载 modprobe ip_vs modprobe ip_vs_rr modprobe ip_vs_wrr modprobe ip_vs_sh modprobe nf_conntrack_ipv4 lsmod | grep ip_vs 安装配置 Docker k8s v1.11.0 版本推荐使用 Docker v17.03，经测试 v1.13 也能正常使用，而最新的 v18.05 会产生警告，并无法使用资源限制 安装 Docker 所有节点 yum install -y docker &amp;&amp;\\ systemctl enable docker &amp;&amp;\\ systemctl start docker 配置国内镜像 所有节点 cat &gt; /etc/docker/daemon.json &lt;&lt; EOF { &quot;registry-mirrors&quot;: [&quot;https://docker.mirrors.ustc.edu.cn/&quot;] } EOF systemctl daemon-reload systemctl restart docker 安装配置 Kubernetes 安装 Kubernetes 所有节点 # 配置源 cat &gt; /etc/yum.repos.d/kubernetes.repo &lt;&lt; EOF [kubernetes] name=Kubernetes baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=1 repo_gpgcheck=1 gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg EOF # 安装 yum install -y kubelet kubeadm kubectl ipvsadm 配置启动 Kubelet 所有节点 # 配置kubelet使用国内pause镜像 # 配置kubelet的cgroups # 获取docker的cgroups DOCKER_CGROUPS=$(docker info | grep 'Cgroup' | cut -d' ' -f3) echo $DOCKER_CGROUPS cat &gt; /etc/sysconfig/kubelet &lt;&lt; EOF KUBELET_EXTRA_ARGS=&quot;--cgroup-driver=$DOCKER_CGROUPS --pod-infra-container-image=registry.cn-hangzhou.aliyuncs.com/google_containers/pause-amd64:3.1&quot; EOF # 启动 systemctl daemon-reload systemctl enable kubelet &amp;&amp; systemctl start kubelet 配置 master 节点 master 节点 # 生成配置文件 cat &gt; kubeadm-master.config &lt;&lt; EOF apiVersion: kubeadm.k8s.io/v1alpha2 kind: MasterConfiguration kubernetesVersion: v1.11.0 imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers api: # master 节点 ip advertiseAddress: 192.168.1.220 controllerManagerExtraArgs: node-monitor-grace-period: 10s pod-eviction-timeout: 10s networking: podSubnet: 10.244.0.0/16 kubeProxy: config: # mode: ipvs mode: iptables EOF # 提前拉取镜像，如果失败可以多次尝试 kubeadm config images pull --config kubeadm-master.config # 启动 kubeadm init --config kubeadm-master.config 如以上命令没有出错，会出现类似 kubeadm --join xxx 的说明 rm -rf $HOME/.kube mkdir -p $HOME/.kube cp -i /etc/kubernetes/admin.conf $HOME/.kube/config chown $(id -u):$(id -g) $HOME/.kube/config 执行 kubectl get nodes 查看节点，此时状态应该为 NotReady，接着开始配置 flannel 网络插件 # 修改镜像 wgte https://raw.githubusercontent.com/coreos/flannel/v0.10.0/Documentation/kube-flannel.yml sed -i 's/k8s.gcr.io/registry.cn-shanghai.aliyuncs.com\\/gcr-k8s/g' kube-flannel.yaml # 部署 kubectl apply -f kube-flannel.yml 查看（需要时间配置，可反复执行第一条查看直到 pods 状态全为 Running） kubectl get po -n kube-system kubectl get svc -n kube-system 配置好网络之后 kubeadm 会自动部署 coredns，再执行 kubectl get nodes，此时 master 节点状态应该为 Ready 配置子节点 node-1、node-2 节点 master 节点执行 kubeadm token create --print-join-command，将结果复制，到 node 上执行，加入集群，如果执行失败可能是 selinux 没关（我在此处困了很久……），最后在 master 节点执行 kubectl get node，应该会看见加入进来的节点 测试集群 master 节点 部署 deploy kubectl run nginx --replicas=2 --image=nginx:alpine --port=80 kubectl expose deployment nginx --type=NodePort --name=test-service-nodeport kubectl expose deployment nginx --name=test-service kubectl describe svc test-service 访问测试，32340 为上面最后一条命令查看 svc 时获取的端口 浏览器打开 http://&lt;master-ip&gt;:&lt;32340&gt; 会返回 nginx 的欢迎界面 清理删除 kubectl delete svc test-service test-service-nodeport kubectl delete deploy nginx 结束 部署完成之后想增加节点只要按照子节点部署的步骤进行即可，之后可以参考官方文档安装 dashboard heapster 等插件 此为单主多子节点配置，多主多子配置方法有所不同，日后再说-- ","link":"https://m01i0ng.js.org/shi-yong-kubeadm-kuai-su-chuang-jian-k8s-ji-qun/"},{"title":"Docker 镜像的分阶段构建","content":"Docker 镜像内部寸土寸金，如何能尽量减小镜像的大小，其中一个方法是多阶段构建 一些语言项目例如前端、Go 等，其构建阶段需要一堆依赖如 node_modules、vendor 等，但运行阶段只需要 build 出来的静态页面或二进制文件，所以要将构建和运行分开为两个阶段，最终镜像中只包含 build 的结果 以前端项目举例，目录结构如下： ├── .docker ├── .dockerignore ├── Dockerfile ├── README.md ├── node_modules ├── package.json ├── public ├── src └── yarn.lock .docker 文件夹中存放了 nginx 的配置 .dockerignore 文件写不希望添加到镜像中的文件，比如 node_modules Dockerfile 是主角，内容如下： # 第一阶段，拉取 node 基础镜像并安装依赖，执行构建 FROM node:11-alpine as builder WORKDIR /tmp COPY . . RUN npm config set registry https://registry.npm.taobao.org \\ &amp;&amp; npm i -g yarn RUN yarn &amp;&amp; yarn build # 第二阶段，将构建完的产物 build 文件夹 COPY 到实际 release 的镜像中，会丢弃第一阶段中其他的文件 FROM nginx:alpine COPY .docker/conf/default.conf /etc/nginx/conf.d/ COPY --from=builder /tmp/build /usr/share/nginx/html EXPOSE 80 执行 docker build -t m01i0ng/demo . 就会生成镜像 跟最终 release 镜像无关的文件依赖等等都要放在构建阶段 ","link":"https://m01i0ng.js.org/docker-jing-xiang-de-fen-jie-duan-gou-jian/"},{"title":"规范你的 commit 信息","content":"Commit Message 格式 &lt;type&gt;(&lt;scope&gt;): &lt;subject&gt; &lt;BLANK LINE&gt; &lt;body&gt; &lt;BLANK LINE&gt; &lt;footer&gt; 参考 Angular 规范 通过 git commit 命令带出的 vim 界面填写的最终结果应该类似如上这个结构, 大致分为三个部分(使用空行分割)： 标题行：必填, 描述主要修改类型和内容 主题内容：描述为什么修改, 做了什么样的修改, 以及开发的思路等等 页脚注释：放 Breaking Changes 或 Closed Issues 分别由如下部分构成： type: commit 的类型 feat: 新特性 fix: 修改问题 refactor: 代码重构 docs: 文档修改 style: 代码格式修改，注意不是 css 修改 test: 测试用例修改 chore: 其他修改，比如构建流程，依赖管理 scope: commit 影响的范围，比如：route, component, utils, build... subject: commit 的概述，建议符合 50/72 formatting body: commit 具体修改内容，可以分为多行，建议符合 50/72 formatting footer: 一些备注，通常是 BREAKING CHANGE 或修复的 bug 的链接 Git Commit 模板 修改 ~/.gitconfig，添加： [commit] template = ~/.gitmessage 新建 ~/.gitmessage 内容可以如下： # head: &lt;type&gt;(&lt;scope&gt;): &lt;subject&gt; # - type: feat, fix, docs, style, refactor, test, chore # - scope: can be empty (eg. if the change is a global or difficult to assign to a single component) # - subject: start with verb (such as 'change'), 50-character line # # body: 72-character wrapped. This should answer: # * Why was this change necessary? # * How does it address the problem? # * Are there any side effects? # # footer: # - Include a link to the ticket, if any. # - BREAKING CHANGE # Commitizen：替代你的 Git Commit commitizen/cz-cli，我们需要借助它提供的 git cz 命令替代我们的 git commit 命令, 帮助我们生成符合规范的 commit message 除此之外，我们还需要为 commitizen 指定一个 Adapter 比如：cz-conventional-changelog (一个符合 Angular 团队规范的 preset)。使得 commitizen 按照我们指定的规范帮助我们生成 commit message 全局安装（推荐） npm install -g commitizen cz-conventional-changelog echo '{ &quot;path&quot;: &quot;cz-conventional-changelog&quot; }' &gt; ~/.czrc 项目级安装 如果不是 node 项目可以用 npm init -y 生成 package.josn npm install -D commitizen cz-conventional-changelog package.json 中配置： &quot;script&quot;: { ..., &quot;commit&quot;: &quot;git-cz&quot;, }, &quot;config&quot;: { &quot;commitizen&quot;: { &quot;path&quot;: &quot;node_modules/cz-conventional-changelog&quot; } } 如果全局安装过 Commitizen，那么在对应的项目中执行 git cz 或 npm run commit 都可以 Commitlint：校验你的 message commitlint 可以帮助我们 lint commit messages, 如果我们提交的不符合指向的规范, 直接拒绝提交 校验配置推荐 @commitlint/config-conventional 同时需要在项目目录下创建配置文件 .commitlintrc.js，写入： module.exports = { extends: ['@commitlint/config-conventional'], rules: {}, } standard-version：自动生成 CHANGELOG 通过以上工具的帮助，我们的 commit message 应该是符合 Angular 团队那套，这样也便于我们借助 standard-version 这样的工具，自动生成 CHANGELOG，甚至是 语义化的版本号(Semantic Version) 安装使用： npm i -S standard-version package.json 配置： &quot;scirpt&quot;: { ..., &quot;release&quot;: &quot;standard-version&quot; } 最后 遵守以上提交规范的同时，禁止使用诸如 git commit -am 方式提交 Commit Message ","link":"https://m01i0ng.js.org/gui-fan-ni-de-commit-xin-xi/"}]}